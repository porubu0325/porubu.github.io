// ゲームの状態を保持するオブジェクト
let game = {
    // ボールの座標
    ballX: 250,
    ballY: 250,
    // ボールの速度
    ballSpeedX: 5,
    ballSpeedY: 5,
    // ゲームが進行中かどうか
    isRunning: true,
  };
  
  // ゲームの初期化
  function init() {
    // ボールを描画する
    drawBall();
  }
  
  // ボールを描画する関数
  function drawBall() {
    // ボールの描画
    const ctx = document.querySelector("#canvas").getContext("2d");
    ctx.fillStyle = "red";
    ctx.fillRect(game.ballX, game.ballY, 50, 50);
  }
  
  // ゲームの更新関数
  function update() {
    // ボールの座標を更新する
    game.ballX += game.ballSpeedX;
    game.ballY += game.ballSpeedY;
  
    // ボールが画面の端に当たったら反射する
    if (game.ballX < 0 || game.ballX > 500) {
      game.ballSpeedX *= -1;
    }
    if (game.ballY < 0 || game.ballY > 500) {
      game.ballSpeedY *= -1;
    }
  }
  
  // ゲームの描画関数
  function render() {
    // ボールを描画する
    drawBall();
  }
  
  // キーボードの入力を処理する関数
  function onKeyDown(event) {
    // 左キーが押されたらボールを左に動かす
    if (event.keyCode === 37) {
      game.ballSpeedX = -5;
    }
    // 右キーが押されたらボールを右に動かす
    if (event.keyCode === 39) {
      game.ballSpeedX = 5;
    }
  }
  
  // ゲームの終了処理
  function end() {
    // ゲームが終了したことを表示する
    alert("ゲームオーバー");
  }
  
  // イベントハンドラの登録
  document.querySelector("#canvas").addEventListener("keydown", onKeyDown);
  
  // ゲームの開始
  init();
  
  // ゲームの更新と描画を繰り返す
  while (game.isRunning) {
    update();
    render();
  }
  
  // ゲームの終了処理
  end();
  